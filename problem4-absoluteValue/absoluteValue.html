<!DOCTYPE html>

<html>
  <head>
    <meta charset = "utf-8">
    <title>Own Absolute Value</title>
    <script src="../blockly_compressed.js"></script>
    <script src="../blocks_compressed.js"></script>
    <script src="../javascript_compressed.js"></script>
    <script src="../python_compressed.js"></script>
    <script src="../msg/js/en.js"></script>

    <script src="absBlocks.js"></script>
    <script src="generators.js"></script>
    <script src="gameplay.js"></script>
    <style>
      body {
        font-family: verdana, sans-serif;
        font-size:100%;
      }
      .meterStatus {
        font-family:monospace;
      }
      .testCell {
        border: 1px dashed black;
        padding: 3px;
      }
    </style>
  </head>
  <body>
    <h1>Own Absolute Value</h1>
    <p>Own Absolute Value: It's time to put your understanding of conditional statements to the test.  Can you <a href = "http://en.wikipedia.org/wiki/Pwn">Pwn!</a> the absolute value function by implementing your own version of it?  E.g., <CODE>absoluteValue(-16.25)</CODE> should return 16.25 while <CODE>absoluteValue(20)</CODE> should return 20. <!--To prove you're extra cool, can you make your program name the first and last initals of extra long names (e.g., <CODE>intials("Super Cool And Original")</CODE> should still return "S.O."--></p>
    <div style = "padding: 5px; margin-bottom: 10px; background-color:#D0D0D0">
      Tests Passed (Green = Pass, Red = Fail):
      <span class = "testCell" id = "test-16.25">-16.25</span>
      <span class = "testCell" id = "test0">0</span>
      <span class = "testCell" id = "test20">20</span>
    </div>
    <form STYLE = "float:right;width: 25%">
      <input id = "language" value = "Python" TYPE = "hidden">
      <DIV>
        <SPAN STYLE = "border:1px solid black; padding:2px; background-color:red;" onClick = "setLanguage('Python')" id = "pythonTab">Python</SPAN>
        <SPAN STYLE = "border:1px solid black; padding:2px;" onClick = "setLanguage('JavaScript')" id = "jsTab">JavaScript</SPAN>
        <SPAN STYLE = "border:1px solid black; padding:2px;" onClick = "runCodeAndTestFunctions()" id = "runTab">Run</SPAN>
      </DIV>
      <TEXTAREA id = "textarea" COLS = "50" ROWS = "50"></TEXTAREA>
    </form>
    <div id="blocklyDiv" style="height: 600px; width: 70%;float:left;"></div>
    <xml id = "toolbox" style = "display: none">
      <block type = "inputvariable_get"></block>
      <block type = "math_number"></block>
      <block type = "math_arithmetic"></block>
      <block type = "math_single"></block>
      <block type = "controls_if"></block>
      <block type = "logic_compare"></block>
      <block type = "return"></block>
    </xml>
    <xml id="startBlocks" style="display: none">
      <block type="absoluteValue" movable="false" deletable="false" x="40" y="0">
      </block>
      <block type = "printAbsoluteValue" movable="false" deletable="false" x = "40" y = "400"></block>
    </xml>
    <script>
     Blockly.inject(document.getElementById('blocklyDiv'),
            {toolbox: document.getElementById('toolbox')});
     Blockly.Xml.domToWorkspace(Blockly.mainWorkspace,
            document.getElementById('startBlocks'));
     function myUpdateFunction() {
       var code = Blockly.JavaScript.workspaceToCode();
       if(document.getElementById('language').value == "Python")
         code = Blockly.Python.workspaceToCode();
       document.getElementById('textarea').value = code;
      }
      Blockly.addChangeListener(myUpdateFunction);
      function setLanguage(language) {
        document.getElementById('language').value = language;
        pythonTab = document.getElementById("pythonTab");
        jsTab = document.getElementById("jsTab");
        if(language == "Python") {
          pythonTab.style.backgroundColor = "#ff0000";
          jsTab.style.backgroundColor = "#ffffff";
        } else {
          pythonTab.style.backgroundColor = "#ffffff";
          jsTab.style.backgroundColor = "#ff0000";
        }
        myUpdateFunction();
      }
    </script>
  </body>
</html>