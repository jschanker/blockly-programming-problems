<!DOCTYPE html>

<html>
  <head>
    <meta charset = "utf-8">
    <title>Not Your Average Numbers</title>
    <script src="../blockly_compressed.js"></script>
    <script src="../blocks_compressed.js"></script>
    <script src="../javascript_compressed.js"></script>
    <script src="../python_compressed.js"></script>
    <script src="../msg/js/en.js"></script>

    <script src="averageOfNumbers-blocks.js"></script>
    <script src="generators.js"></script>
    <script src="gameplay.js"></script>
    <style>
      body {
        font-family: verdana, sans-serif;
        font-size:100%;
      }
      .meterStatus {
        font-family:monospace;
      }
      .testCell {
        border: 1px dashed black;
        padding: 3px;
      }
    </style>
  </head>
  <body>
    <h1>Not Your Average Numbers</h1>
    <p>The average person can't program a computer to get the average of a list of entered numbers.  But you're not the average person, are you?  OK, so this time you're going to be prompting the user continually until he/she enters an integer that's <em>not</em> positive.  Then return the average of the positive numbers at the end.  Be sure to use descriptive variable names that precisely state what the variables hold every time the condition of the while loop is checked so your code is self-documenting.  Besides being easy to read, it'll be easy to prove program correctness this way.  Remember that so-called loop invariant stuff?  Anyway, just to be clear, here are some examples: <CODE>averageOfPositiveEnteredNumbers()</CODE> should return 10 given inputs of <CODE>2, 21, 7, and -5</CODE> or <CODE>2, 21, 7, and 0</CODE>.  You can assume the user always enters one positive integer.  Oh, and you're on your own for testing this time, but you're a pro at this testing thing now, right? Good luck!</p>
    <!--<div style = "padding: 5px; margin-bottom: 10px; background-color:#D0D0D0">
      Tests Passed (Green = Pass, Red = Fail):
      <span class = "testCell" id = "test1">1</span>
      <span class = "testCell" id = "test2">2</span>
      <span class = "testCell" id = "test4">4</span>
      <span class = "testCell" id = "test120">120</span>
      <span class = "testCell" id = "test850">850</span>
      <span class = "testCell" id = "test1000">1000</span>
      <span class = "testCell" id = "test1024">1024</span>
      <span class = "testCell" id = "test1025">1025</span>
      <span class = "testCell" id = "test15360">15360</span>
      <span class = "testCell" id = "test8452495638528">8452495638528</span>
    </div>-->
    <form STYLE = "float:right;width: 25%">
      <input id = "language" value = "Python" TYPE = "hidden">
      <DIV>
        <SPAN STYLE = "border:1px solid black; padding:2px; background-color:red;" onClick = "setLanguage('Python')" id = "pythonTab">Python</SPAN>
        <SPAN STYLE = "border:1px solid black; padding:2px;" onClick = "setLanguage('JavaScript')" id = "jsTab">JavaScript</SPAN>
        <SPAN STYLE = "border:1px solid black; padding:2px;" onClick = "runCodeAndTestFunctions()" id = "runTab">Run</SPAN>
      </DIV>
      <TEXTAREA id = "textarea" COLS = "50" ROWS = "50"></TEXTAREA>
    </form>
    <div id="blocklyDiv" style="height: 600px; width: 70%;float:left;"></div>
    <xml id = "toolbox" style = "display: none;">
      <block type = "variables_get"></block>
      <block type = "math_number"></block>
      <block type = "math_arithmetic"></block>
      <block type = "math_number_property"></block>
      <block type = "logic_compare"></block>
      <block type = "input_prompt"></block>
      <block type = "text"></block>
    </xml>
    <xml id="startBlocks" style="display: none">
      <block type="averageOfPositiveEnteredIntegers" movable="false" deletable="false">
        <statement name = "function">
            <block type = "variables_set" deletable="false" movable="false">
              <next>
                <block type = "variables_set" deletable="false" movable="false">
                  <next>
                    <block type = "variables_set" deletable="false" movable="false">
                      <next>
                        <block type = "variables_set" deletable="false" movable="false">
                          <next>
                            <block type = "controls_doWhileUntil" movable="false" deletable = "false">
                              <statement name = "DO">
                                <block type = "variables_set" deletable = "false" movable = "false">
                                  <next>
                                    <block type = "variables_set" deletable="false" movable="false">
                                      <next>
                                        <block type = "variables_set" deletable="false" movable="false">
                                          <next>
                                            <block type = "variables_set" deletable="false" movable="false"></block>
                                          </next>
                                        </block>
                                      </next>
                                    </block>
                                  </next>
                                </block>
                              </statement>   
                              <next>
                                <block type = "return" movable = "false" deletable = "false"></block>
                              </next>
                            </block>
                          </next>
                        </block>
                      </next>
                    </block>
                  </next>
              </next>
            </block>
        </statement>
      </block>
      <block type = "printAverageOfPositiveEnteredIntegers" movable="false" deletable="false" x = "0" y = "520"></block>
    </xml>
    <script>
     Blockly.inject(document.getElementById('blocklyDiv'),
            {toolbox: document.getElementById('toolbox'),scrollbars:true});
     Blockly.Xml.domToWorkspace(Blockly.mainWorkspace,
            document.getElementById('startBlocks'));
     function myUpdateFunction() {
       var code = Blockly.JavaScript.workspaceToCode();
       if(document.getElementById('language').value == "Python")
         code = Blockly.Python.workspaceToCode();
       document.getElementById('textarea').value = code;
      }
      Blockly.addChangeListener(myUpdateFunction);
      function setLanguage(language) {
        document.getElementById('language').value = language;
        pythonTab = document.getElementById("pythonTab");
        jsTab = document.getElementById("jsTab");
        if(language == "Python") {
          pythonTab.style.backgroundColor = "#ff0000";
          jsTab.style.backgroundColor = "#ffffff";
        } else {
          pythonTab.style.backgroundColor = "#ffffff";
          jsTab.style.backgroundColor = "#ff0000";
        }
        myUpdateFunction();
      }
    </script>
  </body>
</html>